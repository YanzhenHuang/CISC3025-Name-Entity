<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NER</title>
    <style>
        form {
            display: block;
        }
        .input-block{
            display: block;
            justify-content: center;
        }
        .input-query {
            resize: vertical;
        }
        .response-box,
        .input-query{
            display: block;
            width: 100%;
            margin: 0 auto;

            border-style: solid;
            border-width: 3px;
            border-color: #5c83b5;

            min-height: 30px;
            border-radius: 7px;
            padding: 5px;
        }
        .title-textfield {
            margin: 0 auto;
            width: 90%;
        }
        .button-container{
            display: block;
            justify-content: center;
            padding: 10px;
        }
        .btn{
            display: block;
            margin: 0 auto;
            background: #5c83b5;
            color: white;
            border-style: none;
            padding: 5px 10px;
            font-size: 20px;
            border-radius: 7px;
        }
        .btn:hover{
            cursor:pointer;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <h1> Welcome to Name Entity Recognition System! </h1>
    <form id="query-form" action="/result/" method="post">
        {% csrf_token %}
        <div class="input-block">
            <p>
                Don't worry if it takes a bit long to load.
                The running of model takes time. The result will be soon shown.
            </p>
            <div class="title-textfield">
                <h3> Input </h3>
                <textarea name="input-query" class="input-query" rows="4" cols="50"></textarea>
            </div>
        </div>
        <div class="button-container">
            <input class="btn" type="submit" value="Label">
        </div>
    </form>

    <div class="title-textfield">
        <h3>Result:</h3>
        <p id="result" class="response-box">
            <!-- Where you need to write the result.-->
        </p>
    </div>

    <!-- Post form and get Result -->
    <script>
    document.getElementById('query-form').addEventListener('submit', function(event){
        event.preventDefault();

        // Initialize a request obj.
        let xhr = new XMLHttpRequest();
        xhr.open('POST', '/result/', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');

        // Async. Response Handler event listener.
        xhr.onload = function() {
            if (this.status === 200) {
                let response = JSON.parse(this.responseText);
                document.getElementById('result').innerHTML = response.result;
            }
        };

        // Send form data.
        let formData = new FormData(event.target);
        xhr.send(new URLSearchParams(formData).toString());
    });
    </script>

</body>
</html>